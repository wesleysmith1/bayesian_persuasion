{{ block title }}
{{ endblock }}

{{ block content }}

<style>
    .center {
        text-align: center;
    }
    .arrow {
        font-size: 50px;
        text-align: center;
    }
    .flagged {
        color: red;
        font-weight: bolder;
        background: pink !important;
    }
    .notFlagged {
        color: green;
        font-weight: bolder;
        background: rgb(133, 250, 133) !important;
    }
</style>

<div id="loading"></div>

<button id="submit" style="display: none;"></button>

{{ include C.LOADING_TEMPLATE}}

<script>
    let stages = {{C.LOADING_STAGES}}
    let loading = {{loading}}
    let final = {{final}}
    let interval = {{C.LOADING_INTERVAL}}

    $("#loading").append("<h3 id='loading0' class='center'>" + loading[0] + "</h3><div class='loader'></div>")

    let index = 1
    var timer = setInterval(function() {

        let newMessage = final[index-1]

        $("#loading"+(index-1)).html(newMessage)

        $(".loader").remove()

        if (index != loading.length)
            $("#loading").append("<div class='arrow'>&#8595;</div>")
            
        if (index == loading.length) {
            setTimeout(function() {$("#submit").trigger('click')}, interval)
            clearInterval(timer)
            return;
        }

        $("#loading").append("<h3 id='loading" + index + "' class='center'>" + loading[index] + "</h3><div class='loader'></div>")

        index++
    }, interval)
</script>

{{ endblock }}


